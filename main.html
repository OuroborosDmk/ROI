<!DOCTYPE html>
<html>
<head>
    <title></title>
    <style type="text/css">
        *{
            border:0;
            margin:0;
            padding:0;
        }
        #myCanvas{
            border:1px solid black;
            margin-top:50px;
            margin-left:300px;
        }
        .buttonbox{
            width:100%;
            height:100px;
            background-color:#E0E0E0;
        }
        .buttonone{
            border-radius:5px;
            margin-left:50px;
            margin-top:30px;
            background-color:#F8F8F8;
            width:100px;
            height:30px;
            font-size:20px;
            color:black;
            outline:none;
        }
        .buttonone:hover{
            border:1px solid black;
        }
        .inputone{
            outline:none;
            border-radius:5px;
            margin-left:50px;
            margin-top:30px;
            width:100px;
            height:30px;
            font-size:20px;
        }
        a{
            text-decoration:none;
        }
    </style>
</head>
<body>
    <div class="buttonbox">
        <button class="buttonone">提交结果</button>
        <a href="set.html"><button class="buttonone">下一步</button></a>
        <input type="file" class="inputone" accept="image/gif,image/jpeg,image/jpg,image/png,image/svg" onchange="upImg(this)"></input>
    </div>
    <div id="box">
        <!--<canvas id="myCanvas" class="classCanvas" width="600" height="300">

        </canvas>--><!--canvas需要在标签中指定长宽否则会出现问题-->
    </div>
        <script>
        window.onload=function(){
        
        function createCanvas(){
            var numofpic=9;//prompt("请输入上传的图片张数","9");
            //if(numofpic<=0||numofpic>50)
              //  alert("输入错误");
            var tree=document.getElementById("box");
            for(var i=1;i<=numofpic;i++){
                var newCanvas=document.createElement("canvas");
                newCanvas.setAttribute("id","myCanvas");
                tree.appendChild(newCanvas);
            }
        }
        
        function createImage(){
            var imgFile = obj.files[0];  
            console.log(imgFile);  
            var img = new Image();  
            var fr = new FileReader();  
            fr.onload = function(){  
                var htmlStr = '<div class="upWrap">';  
                htmlStr += '<div class="fileWrap">';  
                htmlStr += '<input type="file" accept="image/gif,image/jpeg,image/jpg,image/png,image/svg" onchange="upImg(this)"/>';  
                htmlStr += '</div>';  
                htmlStr += '<div class="imgWrap upedImg"><span class="deleteImg">X</span>';  
                htmlStr += '<img src="'+fr.result+'" alt="" />';  
                htmlStr += '</div>';  
                htmlStr += '</div>';  
                //$('.imgOnloadWrap').append(htmlStr);  
                obj.value = '';  
            }  
            fr.readAsDataURL(imgFile);  
        }

        function canvasResult(){

            var canvaslist=new Array();
            var area=0;
            canvaslist=document.getElementsByTagName("canvas");
            //console.log(canvaslist.length);
            
        
            function canvasRectangle(){ //绘制canvas中矩形
                var myCanvas = document.getElementById('myCanvas'); 
                console.log(myCanvas);
                var ctx=myCanvas.getContext('2d');
                //myCanvas.width = window.innerWidth;
                //myCanvas.height = window.innerHeight;
                  
                myCanvas.addEventListener('mousedown', mouseDown, false);
                myCanvas.addEventListener('mouseup', mouseUp, false);
                myCanvas.addEventListener('mousemove', mouseMove, false);
                  
                var rect={},drag=false;
                  
                function mouseDown(e){
                    rect.startX=(e.pageX - this.offsetLeft);
                    rect.startY=(e.pageY - this.offsetTop);
                    drag=true;
                }

                function mouseUp(){
                    drag=false;
                    console.log(rect.w*rect.h);//矩形面积
                    area=rect.w*rect.h;
                }
                  
                function mouseMove(e){
                    if(drag){
                      rect.w=(e.pageX-this.offsetLeft)-rect.startX;
                      rect.h=(e.pageY-this.offsetTop)-rect.startY ;
                      ctx.clearRect(0,0,myCanvas.width,myCanvas.height);
                      drawRect("stroke");
                    }
                }
                  
                function drawRect(style){
                    if(style==="fill"){
                      ctx.fillRect(rect.startX, rect.startY, rect.w, rect.h);
                    } 
                    if(style==="stroke"){
                      ctx.strokeRect(rect.startX, rect.startY, rect.w, rect.h);
                      
                    }
                }
                  
                function drawScreen(){
                    ctx.lineWidth=1;
                    ctx.strokeStyle='black';  
                }

                drawScreen();

            }
            canvasRectangle();
        }

        createCanvas();
        createImage();
        canvasResult();
    }
    </script>
</body>
</html>